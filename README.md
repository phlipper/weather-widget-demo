# Weather Demo

This is a demo of a basic weather app built using the [OpenWeatherMap API](https://openweathermap.org/api) and [Google Place Autocomplete API](https://developers.google.com/maps/documentation/places/web-service/autocomplete). It is a simple app that displays the current weather conditions for a given city. It also displays the forecast for the next 12 hours. Data is available to display much more information in future updates.

## Project Information

### Requirements

* [X] Must be done in Ruby on Rails
* [X] Accept an address as input
* [X] Retrieve forecast data for the given address. This should include, at minimum, the current temperature _(Bonus points - Retrieve high/low and/or extended forecast)_
* [X] Display the requested forecast details to the user
* [X] Cache the forecast details for 30 minutes for all subsequent requests by zip codes. Display indicator if the result is pulled from the cache.

### Assumptions

* This project is open to interpretation
* Functionality is a priority over form
* If you get stuck, complete as much as you can

## Technology Stack

### Application

* Ruby
* Rails
* PostgreSQL

### Infrastructure

* Render.com

### Integrations

* OpenWeatherMap API
* Google Place Autocomplete API

## Developer Setup

1. Install Docker for your operating system
1. Ensure `.env.local` exists for ENV overrides
    * `touch .env.local`
1. Get the latest code
    * `git pull`
1. Install the application dependencies
    * `docker compose run --rm app bundle`
1. Set up database
    * `docker compose run --rm app rails db:setup`
    * `docker compose run --rm app rails db:test:prepare`
1. Trust the local TLS certificates generated by Caddy
    * `./.caddy/trust_caddy_root.sh`
    * Note: If you are using Firefox, you will need to do the following to enable use of the OS trust store:
        * Open `about:config` in Firefox
        * Search for the setting `security.enterprise_roots.enabled`
        * Toggle the `security.enterprise_roots.enabled` value to `true`
        * [Firefox CA Reference](https://support.mozilla.org/en-US/kb/setting-certificate-authorities-firefox)
1. Run the tests

* `docker compose run --rm app rails test`

### Starting the applications

* To start the Rails application and app dependencies run: `docker compose up app`
  * Open <https://weather.lvh.me> in your browser

### Helpful Commands

* Run the test suite
  * `docker compose run --rm app rails test`
* Run Rails console
  * `docker compose run --rm app rails console`
* Run Database migrations
  * `docker compose run --rm app rails db:migrate`
* Update gems
  * `docker compose run --rm app bundle`
* Stop all docker containers
  * `docker compose down`
